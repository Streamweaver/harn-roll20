<h1>HarnMaster Character Profile</h1>
<div class="sheet-row">
    <div class="sheet-info-col">
        <h4 class="sheet-section-head">Personal</h4>
        <div>
            <div class="sheet-info-label">Name</div>
            <input type="text" name="attr_NAME" class="sheet-info-input">
        </div>
        <div>
            <div class="sheet-info-label">Race</div>
            <input type="text" name="attr_SPECIES" class="sheet-info-input">
        </div>
        <div>
            <div class="sheet-info-label">Gender</div>
            <input type="text" name="attr_GENDER" class="sheet-info-input">
        </div>
        <div>
            <div class="sheet-info-label">Birthdate</div>
            <input type="text" name="attr_BIRTHDATE" class="sheet-info-input">
        </div>
        <div>
            <div class="sheet-info-label">Sunsign</div>
            <select name="attr_SUNSIGN" class="sheet-info-input">
                <option value="Ulandus">Ulandus</option>
                <option value="Ulandus-Aralius">Ulandus-Aralius</option>
                <option value="Aralius">Aralius</option>
                <option value="Aralius-Feniri">Aralius-Feniri</option>
                <option value="Feniri">Feniri</option>
                <option value="Feniri-Ahnu">Feniri-Ahnu</option>
                <option value="Ahnu">Ahnu</option>
                <option value="Ahnu-Angberelius">Ahnu-Angberelius</option>
                <option value="Angberelius">Angberelius</option>
                <option value="Angberelius-Nadai">Angberelius-Nadai</option>
                <option value="Nadai">Nadai</option>
                <option value="Nadai-Hirin">Nadai-Hirin</option>
                <option value="Hirin">Hirin</option>
                <option value="Hirin-Tarael">Hirin-Tarael</option>
                <option value="Tarael">Tarael</option>
                <option value="Tarael-Tai">Tarael-Tai</option>
                <option value="Tai">Tai</option>
                <option value="Tai-Skorus">Tai-Skorus</option>
                <option value="Skorus">Skorus</option>
                <option value="Skorus-Masara">Skorus-Masara</option>
                <option value="Masara">Masara</option>
                <option value="Masara-Lado">Masara-Lado</option>
                <option value="Lado">Lado</option>
                <option value="Lado-Ulandus">Lado-Ulandus</option>
            </select>
        </div>
        <hr class="sheet-hr">
        <div>
            <div class="sheet-stat-label">Age</div>
            <input type="text" name="attr_AGE" class="sheet-stat-value">
            <div class="sheet-stat-label">Morality</div>
            <input type="text" name="attr_MORAL" class="sheet-stat-value">
            <div class="sheet-stat-label">Piety</div>
            <input type="text" name="attr_PIETY" class="sheet-stat-value">
        </div>
        <div>
            <div class="sheet-stat-label">Height</div>
            <input type="text" name="attr_HEIGHT" class="sheet-stat-value">
            <div class="sheet-stat-label">Frame</div>
            <input type="text" name="attr_FRAME" class="sheet-stat-value">
            <div class="sheet-stat-label">Weight</div>
            <input type="text" name="attr_WEIGHT" class="sheet-stat-value">
        </div>
        <div>
            <div class="sheet-stat-label">Skin</div>
            <input type="text" name="attr_COMPLEXION" class="sheet-stat-value">
            <div class="sheet-stat-label">Hair</div>
            <input type="text" name="attr_HAIR_COLORS" class="sheet-stat-value">
            <div class="sheet-stat-label">Eyes</div>
            <input type="text" name="attr_EYE_COLOR" class="sheet-stat-value">
        </div>
    </div>

    <div class="sheet-stat-col">
        <h4 class="sheet-section-head">Attributes</h4>
        <div>
            <div class="sheet-stat-label sheet-font-heavy">STR</div>
            <div class="sheet-stat-value"><input type="text" name="attr_STR" class="sheet-stat-value" value="0"></div>
            <div class="sheet-stat-label">EYE</div>
            <div class="sheet-stat-value"><input type="text" name="attr_EYE" class="sheet-stat-value" value="0"></div>
        </div>
        <div>
            <div class="sheet-stat-label sheet-font-heavy">STA</div>
            <div class="sheet-stat-value"><input type="text" name="attr_STA" class="sheet-stat-value" value="0"></div>
            <div class="sheet-stat-label">HRG</div>
            <div class="sheet-stat-value"><input type="text" name="attr_HRG" class="sheet-stat-value" value="0"></div>
        </div>
        <div>
            <div class="sheet-stat-label sheet-font-heavy">DEX</div>
            <div class="sheet-stat-value"><input type="text" name="attr_DEX" class="sheet-stat-value" value="0"></div>
            <div class="sheet-stat-label">SML</div>
            <div class="sheet-stat-value"><input type="text" name="attr_SML" class="sheet-stat-value" value="0"></div>
        </div>
        <div>
            <div class="sheet-stat-label  sheet-font-heavy">AGL</div>
            <div class="sheet-stat-value"><input type="text" name="attr_AGL" class="sheet-stat-value" value="0"></div>
            <div class="sheet-stat-label">VOI</div>
            <div class="sheet-stat-value"><input type="text" name="attr_VOI" class="sheet-stat-value" value="0"></div>
        </div>
        <div>
            <div class="sheet-stat-label sheet-font-heavy">INT</div>
            <div class="sheet-stat-value"><input type="text" name="attr_INT" class="sheet-stat-value" value="0"></div>
            <div class="sheet-stat-label">CML</div>
            <div class="sheet-stat-value"><input type="text" name="attr_CML" class="sheet-stat-value" value="0"></div>
        </div>
        <div>
            <div class="sheet-stat-label sheet-font-heavy">AUR</div>
            <div class="sheet-stat-value"><input type="text" name="attr_AUR" class="sheet-stat-value" value="0"></div>
        </div>
        <div>
            <div class="sheet-stat-label sheet-font-heavy">WIL</div>
            <div class="sheet-stat-value"><input type="text" name="attr_WIL" class="sheet-stat-value" value="0"></div>
        </div>
    </div>

    <div class="sheet-info-col">
        <h4 class="sheet-section-head">Family</h4>
        <div>
            <div class="sheet-info-label">Birthplace</div>
            <input type="text" name="attr_BIRTHPLACE" class="sheet-profile-input">
        </div>
        <div>
            <div class="sheet-info-label">Culture</div>
            <input type="text" name="attr_CULTURE" class="sheet-profile-input">
        </div>
        <div>
            <div class="sheet-info-label">Social Class</div>
            <input type="text" name="attr_SOCIAL_CLASS" class="sheet-profile-input">
        </div>
        <div>
            <div class="sheet-info-label">Sibling Rank</div>
            <input type="text" name="attr_SIBLING_RANK" class="sheet-profile-input">
        </div>
        <div>
            <div class="sheet-info-label">Parent</div>
            <input type="text" name="attr_PARENT" class="sheet-profile-input">
        </div>
        <div>
            <div class="sheet-info-label">Estrangement</div>
            <input type="text" name="attr_ESTRANGEMENT" class="sheet-profile-input">
        </div>
        <div>
            <div class="sheet-info-label">Clanhead</div>
            <input type="text" name="attr_CLANHEAD" class="sheet-profile-input">
        </div>
        <div>
            <div class="sheet-info-label">Mental</div>
            <input type="text" name="attr_MENTAL" class="sheet-profile-input">
        </div>
        <div>
            <div class="sheet-info-label">Physical</div>
            <input type="text" name="attr_PHYSICAL" class="sheet-profile-input">
        </div>
    </div>
</div>
<hr class="sheet-hr">
<div class="sheet-3colrow sheet-row">

    <h2>Skills</h2>
    <div class="sheet-col">
        <h4 class="sheet-section-head">Combat</h4>
        <div>
            <div class="sheet-skill-header sheet-skill-label">Skill</div>
            <div class="sheet-skill-header sheet-skill-value sheet-center">SB</div>
            <div class="sheet-skill-header sheet-skill-value sheet-center">ML</div>
        </div>
        <div>
            <input type="text" class="sheet-skill-label" name="attr_INITIATIVE_NAME" value="Initiative" disabled="true">
            <input type="text" name="attr_INITIATIVE_SB" class="sheet-skill-value" value="0">
            <input type="text" name="attr_INITIATIVE_ML" class="sheet-skill-value" value="0">
            <button type="roll"
                    value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{INITIATIVE_NAME}}} {{rolltarget=[[{[[{[[@{INITIATIVE_ML} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{INITIATIVE_ML}}}"
                    name="roll_InitiativeCheck"></button>
        </div>
        <div>
            <input type="text" class="sheet-skill-label" name="attr_UNARMED_NAME" value="Unarmed" disabled="true">
            <input type="text" name="attr_UNARMED_SB" class="sheet-skill-value" value="0">
            <input type="text" name="attr_UNARMED_ML" class="sheet-skill-value" value="0">
            <button type="roll"
                    value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{UNARMED_NAME}}} {{rolltarget=[[{[[{[[@{UNARMED_ML} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{UNARMED_ML}}}"
                    name="roll_UnarmedCheck"></button>
        </div>
        <div>
            <input type="text" class="sheet-skill-label" name="attr_DODGE_NAME" value="Dodge" disabled="true">
            <input type="text" name="attr_DODGE_SB" class="sheet-skill-value" value="0">
            <input type="text" name="attr_DODGE_ML" class="sheet-skill-value" value="0">
            <button type="roll"
                    value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{DODGE_NAME}}} {{rolltarget=[[{[[{[[@{DODGE_ML} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{DODGE_ML}}}"
                    name="roll_DodgeCheck"></button>
        </div>
        <fieldset class="repeating_combatskill">
            <div>
                <input type="text" name="attr_COMBATSKILL_NAME" class="sheet-skill-label">
                <input type="text" name="attr_COMBATSKILL_SB" class="sheet-skill-value" value="0">
                <input type="text" name="attr_COMBATSKILL_ML" class="sheet-skill-value" value="0">
                <button type="roll"
                        value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{COMBATSKILL_NAME}}} {{rolltarget=[[{[[{[[@{COMBATSKILL_ML} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{COMBATSKILL_ML}}}"
                        name="roll_CombatSkillCheck"></button>
            </div>
        </fieldset>
    </div>
    <div class="sheet-col">
        <h4 class="sheet-section-head">Physical</h4>
        <div>
            <div class="sheet-skill-header sheet-skill-label">Skill</div>
            <div class="sheet-skill-header sheet-skill-value sheet-center">SB</div>
            <div class="sheet-skill-header sheet-skill-value sheet-center">ML</div>
        </div>
        <div>
            <input type="text" class="sheet-skill-label" name="attr_CLIMBING_NAME" value="Climbing" disabled="true">
            <input type="text" name="attr_CLIMBING_SB" class="sheet-skill-value" value="0">
            <input type="text" name="attr_CLIMBING_ML" class="sheet-skill-value" value="0">
            <button type="roll"
                    value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{CLIMBING_NAME}}} {{rolltarget=[[{[[{[[@{CLIMBING_ML} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{CLIMBING_ML}}}"
                    name="roll_ClimbingSkillCheck"></button>
        </div>
        <div>
            <input type="text" class="sheet-skill-label" name="attr_CONDITION_NAME" value="Condition" disabled="true">
            <input type="text" name="attr_CONDITION_SB" class="sheet-skill-value" value="0">
            <input type="text" name="attr_CONDITION_ML" class="sheet-skill-value" value="0">
            <button type="roll"
                    value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{CONDITION_NAME}}} {{rolltarget=[[{[[{[[@{CONDITION_ML} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{CONDITION_ML}}}"
                    name="roll_ConditionSkillCheck"></button>
        </div>
        <div>
            <input type="text" class="sheet-skill-label" name="attr_JUMPING_NAME" value="Jumping" disabled="true">
            <input type="text" name="attr_JUMPING_SB" class="sheet-skill-value" value="0">
            <input type="text" name="attr_JUMPING_ML" class="sheet-skill-value" value="0">
            <button type="roll"
                    value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{JUMPING_NAME}}} {{rolltarget=[[{[[{[[@{JUMPING_ML} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{JUMPING_ML}}}"
                    name="roll_JumpingSkillCheck"></button>
        </div>
        <div>
            <input type="text" class="sheet-skill-label" name="attr_STEALTH_NAME" value="Stealth" disabled="true">
            <input type="text" name="attr_STEALTH_SB" class="sheet-skill-value" value="0">
            <input type="text" name="attr_STEALTH_ML" class="sheet-skill-value" value="0">
            <button type="roll"
                    value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{STEALTH_NAME}}} {{rolltarget=[[{[[{[[@{STEALTH_ML} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{STEALTH_ML}}}"
                    name="roll_StealthSkillCheck"></button>
        </div>
        <div>
            <input type="text" class="sheet-skill-label" name="attr_THROWING_NAME" value="Throwing" disabled="true">
            <input type="text" name="attr_THROWING_SB" class="sheet-skill-value" value="0">
            <input type="text" name="attr_THROWING_ML" class="sheet-skill-value" value="0">
            <button type="roll"
                    value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{THROWING_NAME}}} {{rolltarget=[[{[[{[[@{THROWING_ML} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{THROWING_ML}}}"
                    name="roll_ThrowingSkillCheck"></button>
        </div>
        <fieldset class="repeating_physicalskill">
            <div>
                <input type="text" name="attr_PHYSICALSKILL_NAME" class="sheet-skill-label">
                <input type="text" name="attr_PHYSICALSKILL_SB" class="sheet-skill-value" value="0">
                <input type="text" name="attr_PHYSICALSKILL_ML" class="sheet-skill-value" value="0">
                <button type="roll"
                        value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{PHYSICALSKILL_NAME}}} {{rolltarget=[[{[[{[[@{PHYSICALSKILL_ML} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{PHYSICALSKILL_ML}}}"
                        name="roll_PhysicalSkillCheck"></button>
            </div>
        </fieldset>
    </div>
    <div class="sheet-col">
        <h4 class="sheet-section-head">Communication</h4>
        <div>
            <div class="sheet-skill-header sheet-skill-label">Skill</div>
            <div class="sheet-skill-header sheet-skill-value sheet-center">SB</div>
            <div class="sheet-skill-header sheet-skill-value sheet-center">ML</div>
        </div>
        <div>
            <input type="text" class="sheet-skill-label" name="attr_AWARENESS_NAME" value="Awareness" disabled="true">
            <input type="text" name="attr_AWARENESS_SB" class="sheet-skill-value" value="0">
            <input type="text" name="attr_AWARENESS_ML" class="sheet-skill-value" value="0">
            <button type="roll"
                    value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{AWARENESS_NAME}}} {{rolltarget=[[{[[{[[@{AWARENESS_ML} - [[(@{UNIVERSAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{UNIVERSAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{AWARENESS_ML}}}"
                    name="roll_AwarenessSkillCheck"></button>
        </div>
        <div>
            <input type="text" class="sheet-skill-label" name="attr_INTRIGUE_NAME" value="Intrigue" disabled="true">
            <input type="text" name="attr_INTRIGUE_SB" class="sheet-skill-value" value="0">
            <input type="text" name="attr_INTRIGUE_ML" class="sheet-skill-value" value="0">
            <button type="roll"
                    value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{INTRIGUE_NAME}}} {{rolltarget=[[{[[{[[@{INTRIGUE_ML} - [[(@{UNIVERSAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{UNIVERSAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{INTRIGUE_ML}}}"
                    name="roll_IntrigueSkillCheck"></button>
        </div>
        <div>
            <input type="text" class="sheet-skill-label" name="attr_ORATORY_NAME" value="Oratory" disabled="true">
            <input type="text" name="attr_ORATORY_SB" class="sheet-skill-value" value="0">
            <input type="text" name="attr_ORATORY_ML" class="sheet-skill-value" value="0">
            <button type="roll"
                    value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{ORATORY_NAME}}} {{rolltarget=[[{[[{[[@{ORATORY_ML} - [[(@{UNIVERSAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{UNIVERSAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{ORATORY_ML}}}"
                    name="roll_OratorySkillCheck"></button>
        </div>
        <div>
            <input type="text" class="sheet-skill-label" name="attr_RHETORIC_NAME" value="Rhetoric" disabled="true">
            <input type="text" name="attr_RHETORIC_SB" class="sheet-skill-value" value="0">
            <input type="text" name="attr_RHETORIC_ML" class="sheet-skill-value" value="0">
            <button type="roll"
                    value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{RHETORIC_NAME}}} {{rolltarget=[[{[[{[[@{RHETORIC_ML} - [[(@{UNIVERSAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{UNIVERSAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{RHETORIC_ML}}}"
                    name="roll_RhetoricSkillCheck"></button>
        </div>
        <div>
            <input type="text" class="sheet-skill-label" name="attr_SINGING_NAME" value="Singing" disabled="true">
            <input type="text" name="attr_SINGING_SB" class="sheet-skill-value" value="0">
            <input type="text" name="attr_SINGING_ML" class="sheet-skill-value" value="0">
            <button type="roll"
                    value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{SINGING_NAME}}} {{rolltarget=[[{[[{[[@{SINGING_ML} - [[(@{UNIVERSAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{UNIVERSAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{SINGING_ML}}}"
                    name="roll_SingingSkillCheck"></button>
        </div>
        <fieldset class="repeating_communicationskill">
            <div>
                <input type="text" name="attr_COMMUNICATIONSKILL_NAME" class="sheet-skill-label">
                <input type="text" name="attr_COMMUNICATIONSKILL_SB" class="sheet-skill-value" value="0">
                <input type="text" name="attr_COMMUNICATIONSKILL_ML" class="sheet-skill-value" value="0">
                <button type="roll"
                        value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{COMMUNICATIONSKILL_NAME}}} {{rolltarget=[[{[[{[[@{COMMUNICATIONSKILL_ML} - [[(@{UNIVERSAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{UNIVERSAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{COMMUNICATIONSKILL_ML}}}"
                        name="roll_CommunicationSkillCheck"></button>
            </div>
        </fieldset>

    </div>
</div>
<div class="sheet-3colrow">
    <div class="sheet-col">
        <h4 class="sheet-section-head">Craft/Lore</h4>
        <div>
            <div class="sheet-skill-header sheet-skill-label">Skill</div>
            <div class="sheet-skill-header sheet-skill-value sheet-center">SB</div>
            <div class="sheet-skill-header sheet-skill-value sheet-center">ML</div>
        </div>
        <fieldset class="repeating_loreskill">
            <div>
                <input type="text" name="attr_LORESKILL_NAME" class="sheet-skill-label">
                <input type="text" name="attr_LORESKILL_SB" class="sheet-skill-value" value="0">
                <input type="text" name="attr_LORESKILL_ML" class="sheet-skill-value" value="0">
                <button type="roll"
                        value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{LORESKILL_NAME}}} {{rolltarget=[[{[[{[[@{LORESKILL_ML} - [[(@{UNIVERSAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{UNIVERSAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{LORESKILL_ML}}}"
                        name="roll_LoreSkillCheck"></button>
            </div>
        </fieldset>

    </div>
    <div class="sheet-col">
        <h4 class="sheet-section-head">Ritual</h4>
        <div>
            <div class="sheet-skill-header sheet-skill-label">Skill</div>
            <div class="sheet-skill-header sheet-skill-value sheet-center">SB</div>
            <div class="sheet-skill-header sheet-skill-value sheet-center">ML</div>
        </div>
        <fieldset class="repeating_ritualskill">
            <div>
                <input type="text" name="attr_RITUALSKILL_NAME" class="sheet-skill-label">
                <input type="text" name="attr_RITUALSKILL_SB" class="sheet-skill-value" value="0">
                <input type="text" name="attr_RITUALSKILL_ML" class="sheet-skill-value" value="0">
                <button type="roll"
                        value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{RITUALSKILL_NAME}}} {{rolltarget=[[{[[{[[@{RITUALSKILL_ML} - [[(@{UNIVERSAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{UNIVERSAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{RITUALSKILL_ML}}}"
                        name="roll_RitualSkillCheck"></button>
            </div>
        </fieldset>
    </div>
    <div class="sheet-col">
        <h4 class="sheet-section-head">Magic</h4>
        <div>
            <div class="sheet-skill-header sheet-skill-label">Skill</div>
            <div class="sheet-skill-header sheet-skill-value sheet-center" value="0">SB</div>
            <div class="sheet-skill-header sheet-skill-value sheet-center" value="0">ML</div>
        </div>
        <fieldset class="repeating_magicskill">
            <div>
                <input type="text" name="attr_MAGICSKILL_NAME" class="sheet-skill-label">
                <input type="text" name="attr_MAGICSKILL_SB" class="sheet-skill-value" value="0">
                <input type="text" name="attr_MAGICSKILL_ML" class="sheet-skill-value" value="0">
                <button type="roll" value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls @{MAGICSKILL_NAME}}} {{rolltarget=[[{[[{[[@{MAGICSKILL_ML} - [[(@{UNIVERSAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{UNIVERSAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{MAGICSKILL_ML}}}"
                        name="roll_MagicSkillCheck"></button>
            </div>
        </fieldset>

    </div>
</div>
<hr class="sheet-hr">
<div class="sheet-row">
    <h2>Combat Profile</h2>
    <div class="sheet-col">
        <h4 class="sheet-section-head">Combat Stats</h4>
        <div>
            <div class="sheet-combat-label">Initiative</div>
            <input type="text" name="attr_COMBAT_INITIATIVE" value="@{INITIATIVE_ML} - [[(@{PHYSICAL_PENALTY})*5]]" class="sheet-stat-value" disabled="true">
        </div>
        <div>
            <div class="sheet-combat-label">Endurance</div>
            <input type="text" name="attr_COMBAT_ENDURANCE" class="sheet-stat-value" value="0" readonly>
        </div>
        <div>
            <div class="sheet-combat-label">Dexterity</div>
            <input type="text" name="attr_COMBAT_DEX" disabled="true" value="@{DEX}" class="sheet-stat-value">
        </div>
        <div>
            <div class="sheet-combat-label">Agility</div>
            <input type="text" name="attr_COMBAT_AGL" disabled="true" value="@{AGL}" class="sheet-stat-value">
        </div>
        <div>
            <div class="sheet-combat-label">Move(feet)</div>
            <input type="text" name="attr_COMBAT_MOVE" disabled="true" class="sheet-stat-value" value="[[(@{AGL} - (@{PHYSICAL_PENALTY}))*5]]">
        </div>
        <div>
            <div class="sheet-combat-label">Dodge</div>
            <input type="text" name="attr_COMBAT_DODGE" disabled="true" class="sheet-skill-value" value="@{DODGE_ML}">
            <button type="roll"
                    value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls Dodge}} {{rolltarget=[[{[[{[[@{COMBAT_DODGE} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{COMBAT_DODGE}}}"
                    name="roll_CombatDodgeCheck"></button>

        </div>
    </div>
    <div class="sheet-col">
        <h4 class="sheet-section-head">Penalties</h4>
        <div>
            <div class="sheet-combat-label sheet-font-light">Injury Levels</div>
            <input type="text" name="attr_INJURY_TOTAL" value="0" class="sheet-stat-value" readonly>
        </div>
        <div>
            <div class="sheet-combat-label sheet-font-light">Fatigue</div>
            <input type="text" name="attr_FATIGUE_TOTAL" class="sheet-stat-value" value="0">
        </div>
        <div>
            <div class="sheet-combat-label sheet-font-heavy">Universal</div>
            <input type="text" value="0" class="sheet-stat-value" name="attr_UNIVERSAL_PENALTY" readonly>
        </div>
        <div>
            <div class="sheet-combat-label sheet-font-light">Encumb.</div>
            <input type="text" name="attr_ENCUMBRANCE" class="sheet-stat-value" value="0" readonly>
        </div>
        <div>
            <div class="sheet-combat-label sheet-font-heavy">Physical</div>
            <input type="text" name="attr_PHYSICAL_PENALTY" class="sheet-stat-value" value="@{ENCUMBRANCE} + @{UNIVERSAL_PENALTY}" disabled="true">
        </div>
    </div>
    <div class="sheet-col">
        <h4 class="sheet-section-head">Injuries</h4>
        <div>
            <div class="sheet-skill-header sheet-skill-label">Location/Type</div>
            <div class="sheet-skill-header sheet-stat-value sheet-center">SV</div>
            <div class="sheet-skill-header sheet-skill-value sheet-center">LvL</div>
            <div class="sheet-skill-header sheet-skill-value sheet-center">HR</div>
            <div class="sheet-skill-value">&nbsp;</div>
            <div class="sheet-skill-header sheet-check-col sheet-center">Inf</div>
        </div>
        <fieldset class="repeating_injury">
            <div>
                <input type="text" name="attr_INJURY_LOCATION" class="sheet-skill-label">
                <select name="attr_INJURY_SEVERITY" class="sheet-stat-value">
                    <option value="M">M</option>
                    <option value="S">S</option>
                    <option value="G">G</option>
                    <option value="K">K</option>
                </select>
                <input type="text" name="attr_INJURY_LEVEL" class="sheet-skill-value" value="0">
                <input type="text" name="attr_INJURY_HEALINGROLL" class="sheet-skill-value" value="0">
                <div class="sheet-skill-value"><button type="roll" value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=rolls a Healing Check}} {{infected=[[@{INJURY_INFECTED_FEEDBACK}]]}} {{rolltarget=[[{[[{[[(@{INJURY_HEALINGROLL} * [[@{COMBAT_ENDURANCE}]]) + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[0]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=[[@{INJURY_HEALINGROLL} * [[@{COMBAT_ENDURANCE}]]]]}} {{note=@{INJURY_LOCATION} @{INJURY_SEVERITY}@{INJURY_LEVEL} H@{INJURY_HEALINGROLL}}}" name="roll_HealingCheck"></button></div>
                <div class="sheet-check-col sheet-center">
                    <input type="checkbox" name="attr_INJURY_INFECTED"><span></span>
                    <input type="hidden" name="attr_INJURY_INFECTED_FEEDBACK" value="0" readonly>
                </div>
            </div>
        </fieldset>
        <hr class="sheet-hr">
        <div class="sheet-row sheet-panel">
            <button type="roll"
                    value="&{template:check-lt} {{character_name=@{NAME}}} {{rolldesc=rolls Shock}} {{rolltarget=[[@{COMBAT_ENDURANCE}]]}} {{rollresult=[[[[@{UNIVERSAL_PENALTY}]]d6]]}} {{base=@{COMBAT_ENDURANCE}}} {{rolltype=[[@{UNIVERSAL_PENALTY}]]d6}} {{penalty=[[0]]}}"
                    name="roll_ShockCheck">Shock
            </button>
            <button type="roll"
                    value="&{template:check-lt} {{character_name=@{NAME}}} {{rolldesc=rolls Stumble}} {{rolltarget=[[@{COMBAT_AGL}]]}} {{rollresult=[[[[3d6]] + @{PHYSICAL_PENALTY}]]}} {{base=@{COMBAT_AGL}}} {{rolltype=3d6+[[@{PHYSICAL_PENALTY}]]}} {{penalty=[[0]]}}"
                    name="roll_StumbleCheck">Stumble
            </button>
            <button type="roll"
                    value="&{template:check-lt} {{character_name=@{NAME}}} {{rolldesc=rolls Fumble}} {{rolltarget=[[@{COMBAT_DEX}]]}} {{rollresult=[[[[3d6]] + @{PHYSICAL_PENALTY}]]}} {{base=@{COMBAT_DEX}}} {{rolltype=3d6+[[@{PHYSICAL_PENALTY}]]}} {{penalty=[[0]]}}"
                    name="roll_FumbleCheck">Fumble
            </button>
        </div>
    </div>
    <div class="sheet-col">
        <h4 class="sheet-section-head">Load Carried</h4>
        <div>
            <input type="text" name="attr_LOAD_WEAPONS" class="sheet-skill-label" value="Weapons" readonly>
            <input type="text" name="attr_LOAD_WEAPONS_TOTAL" class="sheet-stat-value" value="0" readonly>
        </div>
        <div>
            <input type="text" name="attr_LOAD_ARMOR" class="sheet-skill-label" value="Armor" readonly>
            <input type="text" name="attr_LOAD_ARMOR_TOTAL" class="sheet-stat-value" value="0" class="sheet-number-value" readonly>
        </div>
        <div>
            <input type="text" name="attr_LOAD_INVENTORY" class="sheet-skill-label" value="Inventory" readonly>
            <input type="text" name="attr_LOAD_INVENTORY_TOTAL" class="sheet-stat-value" value="0" class="sheet-number-value" readonly>
        </div>
        <div>
            <div class="sheet-skill-label sheet-skill-header sheet-right">Total Weight:</div>
            <input type="text" name="attr_LOAD_TOTAL" class="sheet-stat-value" value="0" readonly>
        </div>
        <div>
            <div class="sheet-skill-label sheet-right">Mounted? </div>
            <div class="sheet-stat-value sheet-center"><input type="checkbox" name="attr_IS_MOUNTED"><span></span>
        </div>
    </div>
</div>

<div class="sheet-row">
    <h4 class="sheet-section-head">Weapons</h4>
    <div>
        <div class="sheet-skill-header sheet-skill-label">Weapon</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">WGT</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">WQ</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">&nbsp;</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">ATK</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">DEF</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">HM</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">B</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">E</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">P</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">ML</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">AML</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">&nbsp;</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">DML</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">&nbsp;</div>
        <div class="sheet-skill-header sheet-skill-label">Note</div>
    </div>
    <div>
        <input type="text" name="attr_PUNCH_WEAPON_NAME" class="sheet-skill-label" disabled="true" value="Punch">
        <input type="text" name="attr_PUNCH_WEAPON_WGT" class="sheet-skill-value" disabled="true" value="0">
        <input type="text" name="attr_PUNCH_WEAPON_WQ" class="sheet-skill-value" disabled="true" value="0">
        <div class="sheet-skill-value"><button type="roll"  value="&{template:check-lt} {{character_name=@{NAME}}} {{rolldesc=rolls Weapon Break: @{PUNCH_WEAPON_NAME}}} {{rolltarget=[[@{PUNCH_WEAPON_WQ}]]}} {{rollresult=[[3d6]]}} {{base=@{PUNCH_WEAPON_WQ}}} {{rolltype=3d6}} {{penalty=[[0]]}}" name="roll_UnarmedWeaponBreakCheck"></button></div>
        <input type="text" name="attr_PUNCH_WEAPON_ATK" class="sheet-skill-value" disabled="true" value="0">
        <input type="text" name="attr_PUNCH_WEAPON_DEF" class="sheet-skill-value" disabled="true" value="15">
        <input type="text" name="attr_PUNCH_WEAPON_HM" class="sheet-skill-value" disabled="true" value="0">
        <input type="text" name="attr_PUNCH_WEAPON_B" class="sheet-skill-value" disabled="true" value="0">
        <input type="text" name="attr_PUNCH_WEAPON_E" class="sheet-skill-value" disabled="true" value="0">
        <input type="text" name="attr_PUNCH_WEAPON_P" class="sheet-skill-value" disabled="true" value="0">
        <input type="text" name="attr_PUNCH_WEAPON_ML" class="sheet-skill-value" disabled="true" value="@{UNARMED_ML}">
        <input type="text" name="attr_PUNCH_WEAPON_AML" class="sheet-skill-value" disabled="true" value="[[@{PUNCH_WEAPON_ML} + @{PUNCH_WEAPON_ATK}]]">
        <div class="sheet-skill-value"><button type="roll" value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=attacks with @{PUNCH_WEAPON_NAME}}} {{rolltarget=[[{[[{[[@{PUNCH_WEAPON_AML} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{PUNCH_WEAPON_AML}}} {{note=B(@{PUNCH_WEAPON_B}) E(@{PUNCH_WEAPON_E}) P(@{PUNCH_WEAPON_P})}}"
                                               name="roll_UnarmedWeaponAMLSkillCheck"></button></div>
        <input type="text" name="attr_PUNCH_WEAPON_DML" class="sheet-skill-value" disabled="true" value="[[@{PUNCH_WEAPON_ML} + @{PUNCH_WEAPON_DEF}]]">
        <div class="sheet-skill-value"><button type="roll" value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=blocks with a @{PUNCH_WEAPON_NAME}}} {{rolltarget=[[{[[{[[@{PUNCH_WEAPON_DML} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{PUNCH_WEAPON_DML}}}" name="roll_UnarmedWeaponDMLSkillCheck"></button></div>
        <input type="text" name="attr_PUNCH_WEAPON_NOTE" class="sheet-skill-label">
    </div>
    <div>
        <input type="text" name="attr_KICK_WEAPON_NAME" class="sheet-skill-label" disabled="true" value="Kick">
        <input type="text" name="attr_KICK_WEAPON_WGT" class="sheet-skill-value" disabled="true" value="0">
        <input type="text" name="attr_KICK_WEAPON_WQ" class="sheet-skill-value" disabled="true" value="0">
        <div class="sheet-skill-value"><button type="roll"  value="&{template:check-lt} {{character_name=@{NAME}}} {{rolldesc=rolls Weapon Break: @{KICK_WEAPON_NAME}}} {{rolltarget=[[@{KICK_WEAPON_WQ}]]}} {{rollresult=[[3d6]]}} {{base=@{KICK_WEAPON_WQ}}} {{rolltype=3d6}} {{penalty=[[0]]}}" name="roll_UnarmedWeaponBreakCheck"></button></div>
        <input type="text" name="attr_KICK_WEAPON_ATK" class="sheet-skill-value" disabled="true" value="5">
        <input type="text" name="attr_KICK_WEAPON_DEF" class="sheet-skill-value" disabled="true" value="5">
        <input type="text" name="attr_KICK_WEAPON_HM" class="sheet-skill-value" disabled="true" value="0">
        <input type="text" name="attr_KICK_WEAPON_B" class="sheet-skill-value" disabled="true" value="1">
        <input type="text" name="attr_KICK_WEAPON_E" class="sheet-skill-value" disabled="true" value="0">
        <input type="text" name="attr_KICK_WEAPON_P" class="sheet-skill-value" disabled="true" value="0">
        <input type="text" name="attr_KICK_WEAPON_ML" class="sheet-skill-value" disabled="true" value="@{UNARMED_ML}">
        <input type="text" name="attr_KICK_WEAPON_AML" class="sheet-skill-value" disabled="true" value="[[@{KICK_WEAPON_ML} + @{KICK_WEAPON_ATK}]]">
        <div class="sheet-skill-value"><button type="roll" value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=attacks with a @{KICK_WEAPON_NAME}}} {{rolltarget=[[{[[{[[@{KICK_WEAPON_AML} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{KICK_WEAPON_AML}}} {{note=B(@{KICK_WEAPON_B}) E(@{KICK_WEAPON_E}) P(@{KICK_WEAPON_P})}}"
                                               name="roll_UnarmedWeaponAMLSkillCheck"></button></div>
        <input type="text" name="attr_KICK_WEAPON_DML" class="sheet-skill-value" disabled="true" value="[[@{KICK_WEAPON_ML} + @{KICK_WEAPON_DEF}]]">
        <div class="sheet-skill-value"><button type="roll" value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=defends with a @{KICK_WEAPON_NAME}}} {{rolltarget=[[{[[{[[@{KICK_WEAPON_DML} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{KICK_WEAPON_DML}}}" name="roll_UnarmedWeaponDMLSkillCheck"></button></div>
        <input type="text" name="attr_KICK_WEAPON_NOTE" class="sheet-skill-label">
    </div>
    <fieldset class="repeating_weapon">
        <div>
            <input type="text" name="attr_WEAPON_NAME" class="sheet-skill-label">
            <input type="text" name="attr_WEAPON_WGT" class="sheet-skill-value" value="0">
            <input type="text" name="attr_WEAPON_WQ" class="sheet-skill-value" value="0">
            <div class="sheet-skill-value"><button type="roll"  value="&{template:check-lt} {{character_name=@{NAME}}} {{rolldesc=rolls Weapon Break: @{WEAPON_NAME}}} {{rolltarget=[[@{WEAPON_WQ}]]}} {{rollresult=[[3d6]]}} {{base=@{WEAPON_WQ}}} {{rolltype=3d6}} {{penalty=[[0]]}}" name="roll_WeaponBreakCheck"></button></div>
            <input type="text" name="attr_WEAPON_ATK" class="sheet-skill-value" value="0">
            <input type="text" name="attr_WEAPON_DEF" class="sheet-skill-value" value="0">
            <input type="text" name="attr_WEAPON_HM" class="sheet-skill-value" value="0">
            <input type="text" name="attr_WEAPON_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_WEAPON_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_WEAPON_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_WEAPON_ML" class="sheet-skill-value" value="0">
            <input type="text" name="attr_WEAPON_AML" class="sheet-skill-value" disabled="true" value="@{WEAPON_ML} + @{WEAPON_ATK}">
            <div class="sheet-skill-value"><button type="roll"
                                                   value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=attacks with a @{WEAPON_NAME}}} {{rolltarget=[[{[[{[[@{WEAPON_AML} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{WEAPON_AML}}} {{note=B(@{WEAPON_B}) E(@{WEAPON_E}) P(@{WEAPON_P})}}" name="roll_WeaponAMLSkillCheck"></button></div>
            <input type="text" name="attr_WEAPON_DML" class="sheet-skill-value" disabled="true" value="@{WEAPON_ML} + @{WEAPON_DEF}">
            <div class="sheet-skill-value"><button type="roll" value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=blocks with a @{WEAPON_NAME}}} {{rolltarget=[[{[[{[[@{WEAPON_DML} - [[(@{PHYSICAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{PHYSICAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{WEAPON_DML}}} {{note=WQ @{WEAPON_WQ}}}" name="roll_WeaponDMLSkillCheck"></button></div>
            <input type="text" name="attr_WEAPON_NOTE" class="sheet-skill-label">
        </div>
    </fieldset>
</div>

<div class="sheet-row">
    <div class="sheet-col">
        <h4 class="sheet-section-head">Armor Worn</h4>
        <div class="sheet-skill-header sheet-skill-label">Armor/Clothing</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">AQ</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">WGT</div>
        <fieldset class="repeating_armoritems">
            <input type="text" name="attr_ARMOR_NAME" class="sheet-skill-label">
            <input type="text" name="attr_ARMOR_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_ARMOR_WGT" class="sheet-skill-value" value="0">
        </fieldset>
    </div>
    <div class="sheet-col sheet-gutters">
        <h4 class="sheet-section-head">Armor Protection</h4>
        <div>
            <div class="sheet-info-label sheet-skill-header">Location</div>
            <div class="sheet-skill-label sheet-skill-header">Compound Layers</div>
            <div class="sheet-skill-value sheet-skill-header sheet-center">AQ</div>
            <div class="sheet-skill-value sheet-skill-header sheet-center">B</div>
            <div class="sheet-skill-value sheet-skill-header sheet-center">E</div>
            <div class="sheet-skill-value sheet-skill-header sheet-center">P</div>
            <div class="sheet-skill-value sheet-skill-header sheet-center">F</div>
        </div>
        <div>
            <div class="sheet-info-label">Skull</div>
            <input type="text" name="attr_SKULL_LAYERS" class="sheet-skill-label">
            <input type="text" name="attr_SKULL_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_SKULL_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_SKULL_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_SKULL_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_SKULL_F" class="sheet-skill-value" value="0">
        </div>
        <div>
            <div class="sheet-info-label">Face</div>
            <input type="text" name="attr_FACE_LAYERS" class="sheet-skill-label">
            <input type="text" name="attr_FACE_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_FACE_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_FACE_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_FACE_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_FACE_F" class="sheet-skill-value" value="0">
        </div>
        <div>
            <div class="sheet-info-label">Neck</div>
            <input type="text" name="attr_NECK_LAYERS" class="sheet-skill-label">
            <input type="text" name="attr_NECK_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_NECK_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_NECK_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_NECK_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_NECK_F" class="sheet-skill-value" value="0">
        </div>
        <hr class="sheet-hr">
        <div>
            <div class="sheet-info-label">Shoulder</div>
            <input type="text" name="attr_SHOULDER_LAYERS" class="sheet-skill-label">
            <input type="text" name="attr_SHOULDER_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_SHOULDER_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_SHOULDER_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_SHOULDER_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_SHOULDER_F" class="sheet-skill-value" value="0">
        </div>
        <div>
            <div class="sheet-info-label">Upper Arm</div>
            <input type="text" name="attr_UPPERARM_LAYERS" class="sheet-skill-label">
            <input type="text" name="attr_UPPERARM_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_UPPERARM_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_UPPERARM_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_UPPERARM_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_UPPERARM_F" class="sheet-skill-value" value="0">
        </div>
        <div>
            <div class="sheet-info-label">Elbow</div>
            <input type="text" name="attr_ELBOW_LAYERS" class="sheet-skill-label">
            <input type="text" name="attr_ELBOW_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_ELBOW_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_ELBOW_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_ELBOW_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_ELBOW_F" class="sheet-skill-value" value="0">
        </div>
        <div>
            <div class="sheet-info-label">Forearm</div>
            <input type="text" name="attr_FOREARM_LAYERS" class="sheet-skill-label">
            <input type="text" name="attr_FOREARM_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_FOREARM_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_FOREARM_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_FOREARM_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_FOREARM_F" class="sheet-skill-value" value="0">
        </div>
        <div>
            <div class="sheet-info-label">Hand</div>
            <input type="text" name="attr_HAND_LAYERS" class="sheet-skill-label">
            <input type="text" name="attr_HAND_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_HAND_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_HAND_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_HAND_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_HAND_F" class="sheet-skill-value" value="0">
        </div>
        <hr class="sheet-hr">
        <div>
            <div class="sheet-info-label">Thorax</div>
            <input type="text" name="attr_THORAX_LAYERS" class="sheet-skill-label">
            <input type="text" name="attr_THORAX_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_THORAX_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_THORAX_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_THORAX_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_THORAX_F" class="sheet-skill-value" value="0">
        </div>
        <div>
            <div class="sheet-info-label">Abdomen</div>
            <input type="text" name="attr_ABDOMEN_LAYERS" class="sheet-skill-label">
            <input type="text" name="attr_ABDOMEN_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_ABDOMEN_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_ABDOMEN_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_ABDOMEN_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_ABDOMEN_F" class="sheet-skill-value" value="0">
        </div>
        <div>
            <div class="sheet-info-label">Hip</div>
            <input type="text" name="attr_HIP_LAYERS" class="sheet-skill-label">
            <input type="text" name="attr_HIP_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_HIP_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_HIP_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_HIP_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_HIP_F" class="sheet-skill-value" value="0">
        </div>
        <div>
            <div class="sheet-info-label">Groin</div>
            <input type="text" name="attr_GROIN_LAYERS" class="sheet-skill-label">
            <input type="text" name="attr_GROIN_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_GROIN_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_GROIN_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_GROIN_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_GROIN_F" class="sheet-skill-value" value="0">
        </div>
        <hr class="sheet-hr">
        <div>
            <div class="sheet-info-label">Thigh</div>
            <input type="text" name="attr_THIGH_LAYERS" class="sheet-skill-label">
            <input type="text" name="attr_THIGH_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_THIGH_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_THIGH_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_THIGH_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_THIGH_F" class="sheet-skill-value" value="0">
        </div>
        <div>
            <div class="sheet-info-label">Knee</div>
            <input type="text" name="attr_KNEE_LAYERS" class="sheet-skill-label">
            <input type="text" name="attr_KNEE_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_KNEE_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_KNEE_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_KNEE_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_KNEE_F" class="sheet-skill-value" value="0">
        </div>
        <div>
            <div class="sheet-info-label">Calf</div>
            <input type="text" name="attr_CALF_LAYERS" class="sheet-skill-label">
            <input type="text" name="attr_CALF_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_CALF_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_CALF_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_CALF_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_CALF_F" class="sheet-skill-value" value="0">
        </div>
        <div>
            <div class="sheet-info-label">Foot</div>
            <input type="text" name="attr_FOOT_LAYERS" class="sheet-skill-label">
            <input type="text" name="attr_FOOT_AQ" class="sheet-skill-value" value="0">
            <input type="text" name="attr_FOOT_B" class="sheet-skill-value" value="0">
            <input type="text" name="attr_FOOT_E" class="sheet-skill-value" value="0">
            <input type="text" name="attr_FOOT_P" class="sheet-skill-value" value="0">
            <input type="text" name="attr_FOOT_F" class="sheet-skill-value" value="0">
        </div>
    </div>
    <div class="sheet-col">
        <h4 class="sheet-section-head">Inventory</h4>
        <div class="sheet-skill-header sheet-skill-label">Item</div>
        <div class="sheet-skill-header sheet-skill-value sheet-center">WGT</div>
        <fieldset class="repeating_inventoryitems">
            <input type="text" name="attr_INVENTORY_NAME" class="sheet-skill-label">
            <input type="text" name="attr_INVENTORY_WGT" class="sheet-skill-value" value="0">
        </fieldset>
    </div>
</div>
<hr class="sheet-hr">
<div class="sheet-row">
    <h2>Magic & Religon</h2>
    <div class="sheet-row">
        <h4 class="sheet-section-head">Spells</h4>
        <div>
            <div class="sheet-skill-label sheet-skill-header">Name</div>
            <div class="sheet-skill-label sheet-skill-header">Convocation</div>
            <div class="sheet-skill-value sheet-skill-header sheet-center">Level</div>
            <div class="sheet-skill-value sheet-skill-header sheet-center">EML</div>
            <div class="sheet-skill-value sheet-skill-header">&nbsp;</div>
            <div class="sheet-skill-label sheet-skill-header">Notes</div>
        </div>
        <fieldset class="repeating_spells">
            <div>
                <input type="text" name="attr_SPELL_NAME" class="sheet-skill-label">
                <input type="text" name="attr_SPELL_CONVOCATION" class="sheet-skill-label">
                <input type="text" name="attr_SPELL_LEVEL" class="sheet-skill-value" value="0">
                <input type="text" name="attr_SPELL_EML" class="sheet-skill-value" value="0">
                <div class="sheet-skill-value"><button type="roll" value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=casts @{SPELL_NAME}(@{SPELL_CONVOCATION})}} {{rolltarget=[[{[[{[[@{SPELL_EML} - [[(@{UNIVERSAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{UNIVERSAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{SPELL_EML}}} {{note=@{SPELL_NOTE}}}" name="roll_SpellCastCheck"></button></div>
                <input type="text" name="attr_SPELL_NOTE" class="sheet-skill-note">
            </div>
        </fieldset>

    </div>
    <div class="sheet-row">
        <h4 class="sheet-section-head">Rituals</h4>
        <div>
            <div class="sheet-skill-label sheet-skill-header">Name</div>
            <div class="sheet-skill-label sheet-skill-header">Diety</div>
            <div class="sheet-skill-value sheet-skill-header sheet-center">Level</div>
            <div class="sheet-skill-value sheet-skill-header sheet-center">EML</div>
            <div class="sheet-skill-value sheet-skill-header">&nbsp;</div>
            <div class="sheet-skill-label sheet-skill-header">Notes</div>
        </div>
        <fieldset class="repeating_rituals">
            <div>
                <input type="text" name="attr_RITUAL_NAME" class="sheet-skill-label">
                <input type="text" name="attr_RITUAL_RELIGION" class="sheet-skill-label">
                <input type="text" name="attr_RITUAL_LEVEL" class="sheet-skill-value" value="0">
                <input type="text" name="attr_RITUAL_EML" class="sheet-skill-value" value="0">
                <div class="sheet-skill-value"><button type="roll" value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=performs @{RITUAL_NAME}(@{RITUAL_RELIGION})}} {{rolltarget=[[{[[{[[@{RITUAL_EML} - [[(@{UNIVERSAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{UNIVERSAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{RITUAL_EML}}} {{note=@{RITUAL_NOTE}}}" name="roll_RitualCheck"></button></div>
                <input type="text" name="attr_RITUAL_NOTE" class="sheet-skill-note">
            </div>
        </fieldset>
    </div>
    <div class="sheet-row">
        <h4 class="sheet-section-head">Psionic Talents</h4>
        <div>
            <div class="sheet-skill-label sheet-skill-header">Talent</div>
            <div class="sheet-stat-value sheet-skill-header">Fatigue</div>
            <div class="sheet-stat-value sheet-skill-header sheet-center">Time</div>
            <div class="sheet-skill-value sheet-skill-header sheet-center">EML</div>
            <div class="sheet-skill-value sheet-skill-header">&nbsp;</div>
            <div class="sheet-skill-label sheet-skill-header">Notes</div>
        </div>
        <fieldset class="repeating_psionics">
            <div>
                <input type="text" name="attr_TALENT_NAME" class="sheet-skill-label">
                <input type="text" name="attr_TALENT_FATIGUE" class="sheet-stat-value" value="0">
                <input type="text" name="attr_TALENT_TIME" class="sheet-stat-value" value="">
                <input type="text" name="attr_TALENT_EML" class="sheet-skill-value" value="0">
                <div class="sheet-skill-value"><button type="roll" value="&{template:rollcheck} {{character_name=@{NAME}}} {{rolldesc=invokes @{TALENT_NAME}}} {{rolltarget=[[{[[{[[@{TALENT_EML} - [[(@{UNIVERSAL_PENALTY})*5]] + ?{Target Modifier?|0}]],5}kh1]],95}kl1]]}} {{penalty=[[(@{UNIVERSAL_PENALTY})*5]]}} {{rollresult=[[1d100cs5cs10cs15cs20cs25cs30cs35cs40cs45cs50cs55cs60cs65cs70cs75cs80cs85cs90cs95cs100]]}} {{targetmod=[[?{Target Modifier?|0}]]}} {{ml=@{TALENT_EML}}} {{note=(@{TALENT_TIME}); @{TALENT_NOTE}}}" name="roll_TalentCheck"></button></div>
                <input type="text" name="attr_TALENT_NOTE" class="sheet-skill-note">
            </div>
        </fieldset>
    </div>
</div>

<!-- ROLL TEMPLATES/-->

<!--
props:
* character_name: Name of chaaracter performing action.
* rolldesc: Text describing roll in header.
* penalty:  Autocalculated in value from Universal or Physical Penalty. Applied in rolltarget
* targetmod:  Dieroll query in each roll, defaults to 0.  Applied in rolltarget.
* ml:  Unmodified target of the roll.
* rolltarget:  Actual target of roll, derived from 'ml + (penalty * 5) + targetmod'
* rollresult: Die roll result.
* note: Optional property for any additional text at the end of table.
* infection:  sepcial row just for infected wounds, value either 0 or on or not present.

/-->
<rolltemplate class="sheet-rolltemplate-rollcheck">
    <table>
        <tr>
            <th><span class="tcat">{{character_name}} {{rolldesc}}</span></th>
        </tr>
        {{#infected}}
            {{#rollTotal() infected 1}}
                <tr>
                    <td class="sheet-infected">Infected</td>
                </tr>
            {{/rollTotal() infected 1}}
        {{/infected}}
        <tr>
            <td><span class="sheet-tcat">Target Mods:</span>
                ML({{ml}}),
                {{#penalty}}Penalty(-{{penalty}}), {{/penalty}}
                {{#targetmod}}Mod({{targetmod}}){{/targetmod}}
            </td>
        </tr>
        <tr><td><span class="sheet-tcat">Target EML:</span> {{rolltarget}}</td></tr>
        <tr><td><span class="sheet-tcat">Roll(1d100):</span> {{rollresult}}</td></tr>

        {{#^rollGreater() rollresult rolltarget}}
        {{#rollWasCrit() rollresult }}
        <tr>
            <td class="sheet-crit-success">Critical Success!!</td>
        </tr>
        {{/rollWasCrit() rollresult }}
        {{#^rollWasCrit() rollresult }}
        <tr>
            <td class="sheet-success">Marginal Success.</td>
        </tr>
        {{/^rollWasCrit() rollresult }}
        {{/^rollGreater() rollresult rolltarget}}

        {{#rollGreater() rollresult rolltarget}}
        {{#rollWasCrit() rollresult }}
        <tr>
            <td class="sheet-crit-failure">Critical Failure!!</td>
        </tr>
        {{/rollWasCrit() rollresult }}
        {{#^rollWasCrit() rollresult }}
        <tr>
            <td class="sheet-failure">Marginal Failure.</td>
        </tr>
        {{/^rollWasCrit() rollresult }}
        {{/rollGreater() rollresult rolltarget}}


        {{#note}}
        <tr>
            <td class="sheet-note">{{note}}</td>
        </tr>
        {{/note}}

    </table>
</rolltemplate>

<rolltemplate class="sheet-rolltemplate-check-lt">
    <table>
        <tr>
            <th><span class="tcat">{{character_name}} {{rolldesc}}</span></th>
        </tr>


        {{#rollGreater() penalty 0}}
        <tr>
            <td><span class="tcat">Target EML: </span>({{base}}-{{penalty}}) = {{rolltarget}}</td>
        </tr>
        {{/rollGreater() penalty 0}}
        {{#^rollGreater() penalty 0}}
        <tr>
            <td><span class="tcat">Target EML: </span>{{rolltarget}}</td>
        </tr>
        {{/^rollGreater() penalty 0}}
        <tr>
            <td><span class="tcat">Roll({{rolltype}}): </span> {{rollresult}}</td>
        </tr>
        {{#^rollGreater() rollresult rolltarget}}
        <tr>
            <td class="sheet-success">Success.</td>
        </tr>
        {{/^rollGreater() rollresult rolltarget}}
        {{#rollGreater() rollresult rolltarget}}
        <tr>
            <td class="sheet-failure">Failure.</td>
        </tr>
        {{/rollGreater() rollresult rolltarget}}
    </table>
</rolltemplate>

<!-- INJURY TOTALS /-->
<script type="text/worker">

on("change:repeating_injury:injury_level remove:repeating_injury sheet:opened", function() {
	getSectionIDs("repeating_injury", function(IDArray) {
		var fieldNames = [];
        for (var i=0; i < IDArray.length; i++) {
			fieldNames.push("repeating_injury_" + IDArray[i] + "_INJURY_LEVEL");
		}

        var total = 0;
        getAttrs(fieldNames, function(values) {
			for (var i=0; i < IDArray.length; i++) {
				total += parseInt(values["repeating_injury_" + IDArray[i] + "_INJURY_LEVEL"])||0;
			}
			setAttrs({
				"INJURY_TOTAL": total
			});
        });
	});
});

</script>

<!-- INJURY INFECTED FEEDBACK /-->
<script type="text/worker">
    on("change:repeating_injury:injury_infected", function() {
       getAttrs([
          "repeating_injury_INJURY_INFECTED",
          "repeating_spells_INJURY_INFECTED_FEEDBACK"
        ], function(values) {
            var isInfected = (values.repeating_injury_INJURY_INFECTED == 0 ? 0 : 1);
           setAttrs({
                repeating_injury_INJURY_INFECTED_FEEDBACK: isInfected
           });
       });
    });
</script>

<!-- ENDURANCE /-->
<script type="text/worker">
    on("change:str change:sta change:wil sheet:opened", function() {
        getAttrs(["STR", "STA", "WIL"], function(values) {
            var statTotal = parseInt(values["STR"])||0;
            statTotal += parseInt(values["STA"])||0;
            statTotal += parseInt(values["WIL"])||0;

            var endurance = Math.round(statTotal / 3)||0;
            setAttrs({
                "COMBAT_ENDURANCE": endurance
        });
        });
    });
</script>

<!-- LOAD AND ENCUMBRANCE /-->
<script type="text/worker">
    on("change:load_weapons_total change:load_armor_total change:load_inventory_total change:combat_endurance change:is_mounted sheet:opened", function() {
        var total = 0.0;
        getAttrs(["LOAD_ARMOR_TOTAL", "LOAD_WEAPONS_TOTAL", "LOAD_INVENTORY_TOTAL", "COMBAT_ENDURANCE", "IS_MOUNTED"], function(values) {
            total += parseFloat(values["LOAD_ARMOR_TOTAL"])||0.0;
            total += parseFloat(values["LOAD_WEAPONS_TOTAL"])||0.0;
            total += parseFloat(values["LOAD_INVENTORY_TOTAL"])||0.0;

            var encumbrance = Math.round(total/values["COMBAT_ENDURANCE"])||0;
            if(values.IS_MOUNTED != 0) { encumbrance = Math.round(encumbrance/2)};
            setAttrs({
                "LOAD_TOTAL": parseInt(total)||0,
                "ENCUMBRANCE": encumbrance
            });
        });
    });
</script>

<!-- UNIVERSAL PENALTY /-->
<script type="text/worker">
    on("change:is_mounted change:injury_total change:fatigue_total sheet:opened", function() {
        getAttrs(["INJURY_TOTAL", "FATIGUE_TOTAL", "UNIVERSAL_PENALTY", "IS_MOUNTED"], function(values) {
            var fatigue = parseInt(values.FATIGUE_TOTAL);
            if(values.IS_MOUNTED == "on") { fatigue = Math.round(fatigue/2)};
            var uPenalty = parseInt(values.INJURY_TOTAL) + fatigue;
            setAttrs({
                "UNIVERSAL_PENALTY": uPenalty
            });
        });
    });
</script>

<!-- WEAPON LOAD TOTALS /-->
<script type="text/worker">
    on("change:repeating_weapon:weapon_wgt remove:repeating_weapon  sheet:opened", function() {
	getSectionIDs("repeating_weapon", function(IDArray) {
		var fieldNames = [];
        for (var i=0; i < IDArray.length; i++) {
			fieldNames.push("repeating_weapon_" + IDArray[i] + "_WEAPON_WGT");
		}

        var total = 0;
        getAttrs(fieldNames, function(values) {
			for (var i=0; i < IDArray.length; i++) {
				total += parseInt(values["repeating_weapon_" + IDArray[i] + "_WEAPON_WGT"])||0;
			}
			setAttrs({
				"LOAD_WEAPONS_TOTAL": total
			});
        });
	});
});
</script>

<!-- ARMOR LOAD TOTALS /-->
<script type="text/worker">
    on("change:repeating_armoritems:armor_wgt remove:repeating_armoritems  sheet:opened", function() {
	getSectionIDs("repeating_armoritems", function(IDArray) {
		var fieldNames = [];
        for (var i=0; i < IDArray.length; i++) {
			fieldNames.push("repeating_armoritems_" + IDArray[i] + "_ARMOR_WGT");
		}

        var total = 0.0;
        getAttrs(fieldNames, function(values) {
			for (var i=0; i < IDArray.length; i++) {
				total += parseFloat(values["repeating_armoritems_" + IDArray[i] + "_ARMOR_WGT"])||0.0;
			}
			total.toFixed(2);
			setAttrs({
				"LOAD_ARMOR_TOTAL": total
			});
        });
	});
});
</script>

<!-- ITEM LOAD TOTALS /-->
<script type="text/worker">
    on("change:repeating_inventoryitems:inventory_wgt remove:repeating_inventoryitems  sheet:opened", function() {
	getSectionIDs("repeating_inventoryitems", function(IDArray) {
		var fieldNames = [];
        for (var i=0; i < IDArray.length; i++) {
			fieldNames.push("repeating_inventoryitems_" + IDArray[i] + "_INVENTORY_WGT");
		}

        var total = 0.0;
        getAttrs(fieldNames, function(values) {
			for (var i=0; i < IDArray.length; i++) {
				total += parseFloat(values["repeating_inventoryitems_" + IDArray[i] + "_INVENTORY_WGT"])||0.0;
			}
			total.toFixed(2);
			setAttrs({
				"LOAD_INVENTORY_TOTAL": total
			});
        });
	});
});
</script>